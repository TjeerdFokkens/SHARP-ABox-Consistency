    aBoxCon.productionstring(name="Module 2, Unit 1: find conjunction to apply derivation to, Step 1", string="""
        =g>
        isa      goal
        state    derive_next
        form     =P
        ?retrieval>
        state   free
        ==>
        =g>
        isa     goal
        state   module2
        form     =P
        +retrieval>
        isa     proposition
        thing   proposition
        mainconnective  conjunction
        derived yes
    """)


def module2(aBoxCon): #This module applies when a conjunction is found. It derives a conjunct (right or left) that has not been derived yet.

    aBoxCon.productionstring(name="Module 2, Unit 1: conjunction found, move to imaginal, Step 2", string="""
        =g>
        isa      goal
        state    module2
        form     =P
        ?retrieval>
        state    free
        =retrieval>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective conjunction
        subformula1  =Y
        subformula2  =Z
        derived  yes
        relation =V
        ?imaginal>
        state    free
        ==>
        =g>
        isa      goal
        state    label_used
        form     =P
        +imaginal>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective conjunction
        subformula1  =Y
        subformula2  =Z
        relation =V
        derived  yes
        +retrieval>
        isa      storelist
        thing    storelist
        form     =P
    """)

    aBoxCon.productionstring(name="Module 2, Unit 1: label conjunction as used, Step 3", string="""
        =g>
        isa      goal
        state    label_used
        form     =P
        =retrieval>
        isa      storelist
        thing    storelist
        form     =P
        element  =A
        mainconnective =B
        relation =C
        subformula1 =D
        subformula2 =E
        form2    =T1
        form3    =T2
        form4    =T3
        form5    =T4
        form6    =T5
        form7    =T6
        form8    =T7
        form9    =T8
        form10   =T9
        form11   =T10
        form12   =T11
        form13   =T12
        form14   =T13
        form15   =T14
        derived  yes
        =imaginal>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective conjunction
        subformula1  =Y
        subformula2  =Z
        derived  yes
        relation =V
        ?imaginal_action>
        state    free
        ==>
        =g>
        isa      goal
        state    infer_rule
        form     =X
        +imaginal>
        isa      storelist
        thing    storelist
        form     =X
        element  =U
        mainconnective conjunction
        relation =V
        subformula1 =Y
        subformula2 =Z
        form2    =P
        form3    =T1
        form4    =T2
        form5    =T3
        form6    =T4
        form7    =T5
        form8    =T6
        form9    =T7
        form10   =T8
        form11   =T9
        form12   =T10
        form13   =T11
        form14   =T12
        form15   =T13
        derived  yes
    """)

    aBoxCon.productionstring(name="Module 2, Unit 1: derive conjuncts, Step 3", string="""
        =g>
        isa      goal
        state    infer_rule
        form     =P
        ?retrieval>
        state    free
        =imaginal>
        isa      storelist
        thing    storelist
        form     =X
        element  =U
        mainconnective conjunction
        relation =V
        subformula1 =Y
        subformula2 =Z
        form2    =P
        form3    =T1
        form4    =T2
        form5    =T3
        form6    =T4
        form7    =T5
        form8    =T6
        form9    =T7
        form10   =T8
        form11   =T9
        form12   =T10
        form13   =T11
        form14   =T12
        form15   =T13
        derived  yes
        ==>
        =g>
        isa      goal
        state    label_conjuncts
        form     =P
        +imaginal>
        isa      proposition
        thing    proposition
        form     =Y
        element  =U
        mainconnective none
        relation none
        subformula1 none
        subformula2 none
        derived  none
        +imaginal_action>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        mainconnective none
        relation none
        subformula1 none
        subformula2 none
        derived  none
    """)

    aBoxCon.productionstring(name="Module 2, Unit 2a: retrieve first conjunct, Step 1", string="""
        =g>
        isa      goal
        state    label_conjuncts
        form     =P
        =imaginal>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective =A
        relation =B
        subformula1 =C
        subformula2 =D
        derived  =D1
        =imaginal_action>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        mainconnective =E
        relation =F
        subformula1 =G
        subformula2 =H
        derived  =I
        ?retrieval>
        state    free
        ==>
        =g>
        isa      goal
        state    label_conjuncts2
        form     =P
        +retrieval>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        =imaginal_action>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        mainconnective =E
        relation =F
        subformula1 =G
        subformula2 =H
        derived  =I
        ~imaginal>
    """)

    aBoxCon.productionstring(name="Module 2, Unit 2b: retrieve second conjunct, Step 1", string="""
        =g>
        isa      goal
        state    label_conjuncts
        form     =P
        =imaginal>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective =A
        relation =B
        subformula1 =C
        subformula2 =D
        derived  =I
        =imaginal_action>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        mainconnective =E
        relation =F
        subformula1 =G
        subformula2 =H
        derived  =J
        ?retrieval>
        state    free
        ==>
        =g>
        isa      goal
        state    label_conjuncts2
        form     =P
        +retrieval>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        =imaginal>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective =A
        relation =B
        subformula1 =C
        subformula2 =D
        derived  =I
        ~imaginal_action>
    """)

    aBoxCon.productionstring(name="Module 2, Unit 2a: label first conjunct, Step 2", string="""
        =g>
        isa      goal
        state    label_conjuncts2
        form     =P
        =retrieval>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective =A
        relation =B
        subformula1 =C
        subformula2 =D
        derived  =J
        =imaginal_action>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        mainconnective =E
        relation =F
        subformula1 =G
        subformula2 =H
        derived  =I
        ?imaginal>
        state    empty
        ==>
        =g>
        isa      goal
        state    label_conjuncts
        form     =P
        +imaginal>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective =A
        relation =B
        subformula1 =C
        subformula2 =D
        derived  yes
        =imaginal_action>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        mainconnective =E
        relation =F
        subformula1 =G
        subformula2 =H
        derived  =I
        ~retrieval>
    """)

    aBoxCon.productionstring(name="Module 2, Unit 2b: label second conjunct, Step 2", string="""
        =g>
        isa      goal
        state    label_conjuncts2
        form     =P
        =retrieval>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective =V
        subformula1  =C
        subformula2  =B
        relation   =A
        derived  =J
        =imaginal>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        mainconnective =E
        relation =F
        subformula1 =G
        subformula2 =H
        derived  =I
        ?imaginal_action>
        state    empty
        ==>
        =g>
        isa      goal
        state    label_conjuncts
        form     =P
        +imaginal_action>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective =V
        subformula1  =C
        subformula2  =B
        relation   =A
        derived  yes
        =imaginal>
        isa      proposition
        thing    proposition
        form     =Z
        element  =U
        mainconnective =E
        relation =F
        subformula1 =G
        subformula2 =H
        derived  =I
        ~retrieval>
    """)

    aBoxCon.productionstring(name="Module 2, Unit 3: finalise inference and move on to find a clash, Step 1", string="""
        =g>
        isa      goal
        state    label_conjuncts
        form     =P
        ?retrieval>
        state    free
        =imaginal>
        isa      proposition
        thing    proposition
        form     =X
        element  =U
        mainconnective =V
        subformula1  =C
        subformula2  =B
        relation   =A
        derived  yes
        =imaginal_action>
        isa      proposition
        thing    proposition
        form     =Y
        element  =U
        mainconnective =Z
        subformula1  =D
        subformula2  =E
        relation   =F
        derived  yes
        ==>
        =g>
        isa      goal
        state    find_clash
        form     =P
        ~imaginal_action>
        ~imaginal>
        ~retrieval>
    """)
